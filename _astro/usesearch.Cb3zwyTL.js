import{R as u,r as g}from"./index.CQ95-tCy.js";import{n as w}from"./router.C5v59Ra5.js";function b(){const[l,r]=u.useState(new URLSearchParams(globalThis?.window?.location?.hash?.substring(1)));u.useEffect(()=>{const e=()=>{r(new URLSearchParams(globalThis.window.location.hash.substring(1)))};return globalThis.window.addEventListener("hashchange",e),e(),()=>{globalThis.window.removeEventListener("hashchange",e)}},[]);const a=u.useCallback(e=>{globalThis.window&&(window.location.hash=e.toString())},[]);return[l,a]}let n=[],d=(l,r)=>{let a=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},l:0,lc:0,listen(t,i){return e.lc=a.push(t,i||e.l)/2,()=>{let o=a.indexOf(t);~o&&(a.splice(o,2),--e.lc||e.off())}},notify(t,i){let o=!n.length;for(let s=0;s<a.length;s+=2)n.push(a[s],a[s+1],e.value,t,i);if(o){for(let s=0;s<n.length;s+=5){let c;for(let f=s+1;!c&&(f+=5)<n.length;)n[f]<n[s+1]&&(c=n.push(n[s],n[s+1],n[s+2],n[s+3],n[s+4]));c||n[s](n[s+2],n[s+3],n[s+4])}n.length=0}},off(){},set(t){let i=e.value;i!==t&&(e.value=t,e.notify(i))},subscribe(t,i){let o=e.listen(t,i);return t(e.value),o},value:l};return e};function m(l,r,a){let e=new Set([...r,void 0]);return l.listen((t,i,o)=>{e.has(o)&&a(t,i,o)})}const h=d("");function p(l,r={}){let a=g.useCallback(t=>r.keys?m(l,r.keys,t):l.listen(t),[r.keys,l]),e=l.get.bind(l);return g.useSyncExternalStore(a,e,e)}function S(){const[l]=b(),r=p(h),a=l.get("q");u.useEffect(()=>{const t=typeof a=="string"?a.toLowerCase():"";h.set(t)},[a]);const e=u.useCallback(t=>{const i=globalThis.window?.location?.pathname==="/react-icons/search/"?"replace":"push";w(`/react-icons/search/#q=${t}`,{history:i}),h.set(t)},[]);return{query:r,setQuery:e}}export{S as u};
